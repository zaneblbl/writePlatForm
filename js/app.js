(function(t){function e(e){for(var i,s,c=e[0],r=e[1],u=e[2],h=0,d=[];h<c.length;h++)s=c[h],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&d.push(o[s][0]),o[s]=0;for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i]);l&&l(e);while(d.length)d.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],i=!0,c=1;c<n.length;c++){var r=n[c];0!==o[r]&&(i=!1)}i&&(a.splice(e--,1),t=s(s.s=n[0]))}return t}var i={},o={app:0},a=[];function s(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=i,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(n,i,function(e){return t[e]}.bind(null,i));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],r=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var l=r;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"2c32":function(t,e,n){"use strict";var i=n("a0ed"),o=n.n(i);o.a},3576:function(t,e,n){},"4d92":function(t,e,n){},"50ba":function(t,e,n){"use strict";var i=n("d0c3"),o=n.n(i);o.a},"56d7":function(t,e,n){"use strict";n.r(e);n("a133"),n("ed0d"),n("f09c"),n("e117");var i=n("a593"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},a=[],s=(n("5c0b"),n("9ca4")),c={},r=Object(s["a"])(c,o,a,!1,null,null,null),u=r.exports,l=n("3211"),h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"MainPage"},[n("Head",{attrs:{path:t.path},on:{toDelete:t.toDelete,showAddDialog:t.showAddDialog,choosePath:t.choosePath}}),n("div",{staticClass:"mainbox"},[t.list.length?n("ContentList",{attrs:{list:t.list},on:{editContent:t.getContent}}):t._e(),n("ContentEdit",{attrs:{content:t.content},on:{save:t.save}})],1),t.isShowAddDialog?n("AddDialog",{on:{addToGithub:t.add,close:t.showAddDialog}}):t._e()],1)},d=[],f=(n("b4fb"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"Head"},[n("div",{staticClass:"chooseBtn",attrs:{title:"文章列表"},on:{click:t.showPath}}),n("div",{staticClass:"addBtn",attrs:{title:"添加章节"},on:{click:t.showAddDialog}}),n("div",{staticClass:"deleteBtn",attrs:{title:"删除章节"},on:{click:t.toDelete}}),t.showChoosePath?n("PathList",{attrs:{path:t.path},on:{close:t.showPath,submit:t.choosePath}}):t._e()],1)}),g=[],p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"PathList"},[n("div",{staticClass:"cover",on:{click:t.close}}),n("div",{staticClass:"content"},[n("div",{staticClass:"content__item"},[n("div",{staticClass:"addList"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.list__input__value,expression:"list__input__value"}],staticClass:"list__input",attrs:{type:"text"},domProps:{value:t.list__input__value},on:{input:function(e){e.target.composing||(t.list__input__value=e.target.value)}}}),n("button",{on:{click:t.addPathlist}},[t._v("添加")])]),t._l(t.list,(function(e,i){return n("div",{key:i,class:i==t.currentIndex?"check":"uncheck",on:{click:function(n){return t.choose(e,i)}}},[t._v(" "+t._s(e.name)+" ")])}))],2),n("div",{staticClass:"submit",on:{click:t.submit}},[t._v("确定")]),n("div",{staticClass:"submit",on:{click:t.close}},[t._v("取消")])])])},v=[],m=(n("ecb4"),n("e18c"),n("e35a"),n("5e9f"),n("9cf3"),n("0d7a"),{Base64:{_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(t){var e,n,i,o,a,s,c,r="",u=0;t=m.Base64._utf8_encode(t);while(u<t.length)e=t.charCodeAt(u++),n=t.charCodeAt(u++),i=t.charCodeAt(u++),o=e>>2,a=(3&e)<<4|n>>4,s=(15&n)<<2|i>>6,c=63&i,isNaN(n)?s=c=64:isNaN(i)&&(c=64),r=r+this._keyStr.charAt(o)+this._keyStr.charAt(a)+this._keyStr.charAt(s)+this._keyStr.charAt(c);return r},decode:function(t){var e,n,i,o,a,s,c,r="",u=0;t=t.replace(/[^A-Za-z0-9+/=]/g,"");while(u<t.length)o=this._keyStr.indexOf(t.charAt(u++)),a=this._keyStr.indexOf(t.charAt(u++)),s=this._keyStr.indexOf(t.charAt(u++)),c=this._keyStr.indexOf(t.charAt(u++)),e=o<<2|a>>4,n=(15&a)<<4|s>>2,i=(3&s)<<6|c,r+=String.fromCharCode(e),64!==s&&(r+=String.fromCharCode(n)),64!==c&&(r+=String.fromCharCode(i));return r=m.Base64._utf8_decode(r),r},_utf8_encode:function(t){t=t.replace(/rn/g,"n");for(var e="",n=0;n<t.length;n++){var i=t.charCodeAt(n);i<128?e+=String.fromCharCode(i):i>127&&i<2048?(e+=String.fromCharCode(i>>6|192),e+=String.fromCharCode(63&i|128)):(e+=String.fromCharCode(i>>12|224),e+=String.fromCharCode(i>>6&63|128),e+=String.fromCharCode(63&i|128))}return e},_utf8_decode:function(t){var e="",n=0,i=0,o=0,a=0;while(n<t.length)i=t.charCodeAt(n),i<128?(e+=String.fromCharCode(i),n++):i>191&&i<224?(a=t.charCodeAt(n+1),e+=String.fromCharCode((31&i)<<6|63&a),n+=2):(a=t.charCodeAt(n+1),o=t.charCodeAt(n+2),e+=String.fromCharCode((15&i)<<12|(63&a)<<6|63&o),n+=3);return e}},getQueryVariable:function(t){var e={},n=t||window.location.search.substring(1),i=n.split("&");for(var o in i){var a=i[o].split("=")[0],s=i[o].split("=")[1];e[a]=s}return e}}),_=m,b=n("5976"),C=n.n(b),w=C.a.create({timeout:1e4});w.interceptors.request.use((function(t){return t.headers.Authorization=localStorage.getItem("access_token")||"",t}),(function(t){return Promise.reject(t)})),w.interceptors.response.use((function(t){return t.data}),(function(t){return Promise.reject(t)}));var S=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return t=t.toLowerCase(),"post"===t?w.post(e,n):"get"===t?w.get(e,{params:n}):"put"===t?w.put(e,n):"delete"===t?w.delete(e):(console.log("未知的method"),Promise.reject("未知的method"))},x={addToGitHub:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i="https://api.github.com/repos/".concat(t,"/").concat(e.substring(0,e.indexOf("/")),"/contents/").concat(e.substring(e.indexOf("/")+1)),o={};return new Promise((function(t,e){o.message="create".concat(n["title"]),o.content=_.Base64.encode(JSON.stringify(n));var a="";null==o&&void 0==o||(a=JSON.stringify(o),S("put",i,a).then((function(e){t(e)}),(function(t){e(t)})))}))},getFromGitHub:function(t,e){return new Promise((function(n,i){var o="https://api.github.com/repos/".concat(t,"/").concat(e.substring(0,e.indexOf("/")),"/contents/").concat(e.substring(e.indexOf("/")+1));S("get",o).then((function(t){var e=_.Base64.decode(t.content);n(e)}),(function(t){i(t)}))}))},getListFromGitHub:function(t,e){return new Promise((function(n,i){var o="https://api.github.com/repos/".concat(t,"/").concat(e.substring(0,e.indexOf("/")),"/contents").concat(e.substring(e.indexOf("/")+1)?"/"+e.substring(e.indexOf("/")+1):e.substring(e.indexOf("/")+1));S("get",o).then((function(t){var e=t;n(e)}),(function(t){i(t)}))}))},getShaFromGitHub:function(t,e){return new Promise((function(n,i){var o="https://api.github.com/repos/".concat(t,"/").concat(e.substring(0,e.indexOf("/")),"/contents/").concat(e.substring(e.indexOf("/")+1));S("get",o).then((function(i){if(console.log(i),"Not Found"==i.message)x.addToGitHub(t,e);else{var o=i.sha;n(o)}}),(function(t){i(t)}))}))},UpdateToGitHub:function(t,e,n){var i="https://api.github.com/repos/".concat(t,"/").concat(e.substring(0,e.indexOf("/")),"/contents/").concat(e.substring(e.indexOf("/")+1)),o={};return new Promise((function(a,s){x.getShaFromGitHub(t,e).then((function(t){o.sha=t,o.message="upload note",o.content=_.Base64.encode(JSON.stringify(n)),S("put",i,JSON.stringify(o)).then((function(t){a(t)}),(function(t){console.log(t),s(t)}))}),(function(t){s(t)}))}))},DeleteFromGitHub:function(t,e){return new Promise((function(n,i){var o="https://api.github.com/repos/".concat(t,"/").concat(e.substring(0,e.indexOf("/")),"/contents/").concat(e.substring(e.indexOf("/")+1)),a={};x.getShaFromGitHub(t,e).then((function(t){a.sha=t,a.message="delete note",o+="&message=".concat(a.message,"&sha=").concat(a.sha),S("delete",o).then((function(t){n(t)}),(function(t){console.log(t),i(t)}))}),(function(t){i(t)}))}))}},P=x,k={props:["path","list","currentPath","currentIndex","list__input__value"],created:function(){this.getlist()},methods:{addPathlist:function(){console.log(this.list__input__value)},getlist:function(){var t=this,e=localStorage.getItem("account")||"",n=localStorage.getItem("token")||"";P.getListFromGitHub(e,n,"".concat(this.path)).then((function(e){e.length&&(t.list=e,t.currentPath=t.list[0].path)}))},choose:function(t,e){this.currentPath=t.path,this.currentIndex=e},submit:function(){console.log(this.currentPath),this.$emit("submit",this.currentPath)},close:function(){this.$emit("close")}}},y=k,O=(n("9936"),Object(s["a"])(y,p,v,!1,null,null,null)),A=O.exports,D={props:["path","showChoosePath"],data:function(){return{}},components:{PathList:A},methods:{showPath:function(){this.showChoosePath=!this.showChoosePath},choosePath:function(t){this.$emit("choosePath",t)},showAddDialog:function(){this.$emit("showAddDialog")},toDelete:function(){this.$emit("toDelete")}}},I=D,$=(n("bccf"),Object(s["a"])(I,f,g,!1,null,null,null)),j=$.exports,H=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ContentList"},t._l(t.list,(function(e,i){return n("div",{key:i,class:i==t.currentIndex?"check":"uncheck",on:{click:function(n){return t.editContent(e,i)}}},[t._v(" "+t._s(e.name)+" ")])})),0)},G=[],L={props:["list"],data:function(){return{currentPath:"",currentIndex:0}},created:function(){this.editContent(this.list[0],0)},methods:{editContent:function(t,e){this.currentPath=t.path,this.currentIndex=e,this.$emit("editContent",t)}}},N=L,T=(n("2c32"),Object(s["a"])(N,H,G,!1,null,null,null)),B=T.exports,E=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"Dialog"},[n("div",{staticClass:"cover",on:{click:t.close}}),n("div",{staticClass:"content"},[n("div",{staticClass:"content__item"},[n("span",[t._v("title:")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],attrs:{type:"text"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})]),n("div",{staticClass:"submit",on:{click:t.submit}},[t._v("确定")]),n("div",{staticClass:"submit",on:{click:t.close}},[t._v("取消")])])])},F=[],M={data:function(){return{title:""}},methods:{submit:function(){this.$emit("addToGithub",this.title),this.$emit("close",this.title)},close:function(){this.$emit("close",this.title)}}},J=M,z=(n("be38"),Object(s["a"])(J,E,F,!1,null,null,null)),Q=z.exports,V=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ContentEdit"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.nowContent,expression:"nowContent"}],staticClass:"textarea",attrs:{name:"",id:""},domProps:{value:t.nowContent},on:{input:function(e){e.target.composing||(t.nowContent=e.target.value)}}}),n("div",{staticClass:"areaBar"},[n("div",{staticClass:"bar__areacount"},[t._v("字数："+t._s(t.nowContent.length))])]),n("div",{staticClass:"save",on:{click:t.toSave}},[t._v("save")])])},U=[],q={data:function(){return{nowContent:"",content:""}},watch:{getContent:function(t,e){t==e&&(this.nowContent=JSON.parse(t).content)}},methods:{toSave:function(){this.$emit("save",this.nowContent)}}},Z=q,K=(n("7828"),Object(s["a"])(Z,V,U,!1,null,null,null)),R=K.exports,W={data:function(){return{token:"",account:"zaneblbl",path:"test/",list:[],isShowAddDialog:!1,maxId:0,content:"",loading:!1,currentTitle:"",currentId:"",currentPath:""}},components:{ContentList:B,AddDialog:Q,ContentEdit:R,Head:j},created:function(){this.token=localStorage.getItem("access_token")||"",this.getlist()},methods:{choosePath:function(t){this.path=t,console.log(this.path),this.list=[],this.getlist()},getlist:function(){var t=this;console.log(this.path),P.getListFromGitHub(this.account,"".concat(this.path)).then((function(e){console.log(e),t.list=e,t.maxId=e.length}))},add:function(t){var e=this;this.loading=!0;var n={};n.id=this.maxId+1,n.title=t,n.content="",P.addToGitHub(this.account,"".concat(this.path,"/").concat(t,"-").concat(n.id,".json"),n).then((function(){e.$message({message:"添加成功",type:"success"}),e.getlist(),e.loading=!1}),(function(){e.loading=!1,e.$message.error("添加失败")}))},toDelete:function(){var t=this;this.loading=!0,P.DeleteFromGitHub(this.account,"".concat(this.currentPath)).then((function(){t.$message({message:"删除成功",type:"success"}),t.getlist(),t.loading=!1}),(function(){t.loading=!1,t.$message.error("删除失败")}))},getContent:function(t){var e=this;this.loading=!0,console.log(t),P.getFromGitHub(this.account,"".concat(this.path).concat(t.path)).then((function(n){console.log(n),e.content=n;var i=JSON.parse(n);e.currentTitle=i.title,e.currentId=i.id,e.currentPath="".concat(e.path).concat(t.path),e.loading=!1}))},save:function(t){var e=this;this.loading=!0;var n={};n.id=this.currentId,n.title=this.currentTitle,n.content=t,P.UpdateToGitHub(this.account,"".concat(this.path,"/").concat(n.title,"-").concat(n.id,".json"),n).then((function(){e.loading=!1,e.$message({message:"保存成功",type:"success"})}),(function(){e.loading=!1,e.$message.error("保存失败")}))},showAddDialog:function(){this.isShowAddDialog=!this.isShowAddDialog}}},X=W,Y=(n("5872"),Object(s["a"])(X,h,d,!1,null,null,null)),tt=Y.exports,et=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"Login"},[n("div",{staticClass:"contentBox"},[n("div",{staticClass:"item"},[n("span",[t._v("clientID: ")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.clientID,expression:"clientID"}],staticClass:"item__input",attrs:{type:"text"},domProps:{value:t.clientID},on:{input:function(e){e.target.composing||(t.clientID=e.target.value)}}})]),n("div",{staticClass:"item"},[n("span",[t._v("clientSecret: ")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.clientSecret,expression:"clientSecret"}],staticClass:"item__input",attrs:{type:"text"},domProps:{value:t.clientSecret},on:{input:function(e){e.target.composing||(t.clientSecret=e.target.value)}}})]),n("div",{staticClass:"login",on:{click:t.init}},[t._v("登录")])])])},nt=[],it={data:function(){return{clientID:"3d3b51cea6b8867e0f2c",clientSecret:"9a9c5abf88dee6622b7175bdfae6567f002f9ef3",access_token:"",loading:!1,loginText:""}},created:function(){var t=_.getQueryVariable()["code"];t&&this.init()},methods:{init:function(){var t=this;this.access_token=localStorage.getItem("access_token")||"",this.access_token?t.$router.push({path:"/MainPage"}):t.loginListener(t.clientID,t.clientSecret)},toLogin:function(t){var e=this;S("get","https://github.com/login/oauth/access_token?client_id=".concat(t.clientID,"&client_secret=").concat(t.clientSecret,"&code=").concat(t.code)).then((function(t){var n=_.getQueryVariable(t)["access_token"]||"";localStorage.setItem("access_token",n),e.$router.push({path:"/MainPage"})}))},loginListener:function(t,e){var n="https://github.com/login/oauth/authorize?client_id=".concat(t),i=_.getQueryVariable()["code"];if(i){var o={clientID:t,clientSecret:e,code:i};this.toLogin(o)}else window.location.href=n}}},ot=it,at=(n("50ba"),Object(s["a"])(ot,et,nt,!1,null,null,null)),st=at.exports;i["a"].use(l["a"]);var ct=new l["a"]({routes:[{path:"/",name:"Login",component:st},{path:"/MainPage",name:"MainPage",component:tt},{path:"/*",redirect:"/"}]}),rt=n("9f3a");i["a"].use(rt["a"]);var ut=new rt["a"].Store({state:{},mutations:{},actions:{},modules:{}});i["a"].config.productionTip=!1,new i["a"]({router:ct,store:ut,render:function(t){return t(u)}}).$mount("#app")},5872:function(t,e,n){"use strict";var i=n("fe6d"),o=n.n(i);o.a},"5ad6":function(t,e,n){},"5c0b":function(t,e,n){"use strict";var i=n("3576"),o=n.n(i);o.a},"5eb4":function(t,e,n){},7828:function(t,e,n){"use strict";var i=n("5eb4"),o=n.n(i);o.a},9936:function(t,e,n){"use strict";var i=n("e22b"),o=n.n(i);o.a},a0ed:function(t,e,n){},bccf:function(t,e,n){"use strict";var i=n("4d92"),o=n.n(i);o.a},be38:function(t,e,n){"use strict";var i=n("5ad6"),o=n.n(i);o.a},d0c3:function(t,e,n){},e22b:function(t,e,n){},fe6d:function(t,e,n){}});