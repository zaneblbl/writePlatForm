(function(t){function e(e){for(var o,a,s=e[0],r=e[1],u=e[2],h=0,d=[];h<s.length;h++)a=s[h],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&d.push(i[a][0]),i[a]=0;for(o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o]);l&&l(e);while(d.length)d.shift()();return c.push.apply(c,u||[]),n()}function n(){for(var t,e=0;e<c.length;e++){for(var n=c[e],o=!0,s=1;s<n.length;s++){var r=n[s];0!==i[r]&&(o=!1)}o&&(c.splice(e--,1),t=a(a.s=n[0]))}return t}var o={},i={app:0},c=[];function a(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=o,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)a.d(n,o,function(e){return t[e]}.bind(null,o));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],r=s.push.bind(s);s.push=e,s=s.slice();for(var u=0;u<s.length;u++)e(s[u]);var l=r;c.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"1b55":function(t,e,n){},"2c32":function(t,e,n){"use strict";var o=n("da0b"),i=n.n(o);i.a},"363f":function(t,e,n){},"50ba":function(t,e,n){"use strict";var o=n("eb90"),i=n.n(o);i.a},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},c=[],a=(n("5c0b"),n("2877")),s={},r=Object(a["a"])(s,i,c,!1,null,null,null),u=r.exports,l=n("8c4f"),h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"MainPage"},[n("Head",{attrs:{path:t.path},on:{toDelete:t.toDelete,showAddDialog:t.showAddDialog,choosePath:t.choosePath}}),n("div",{staticClass:"mainbox"},[t.list.length?n("ContentList",{attrs:{list:t.list},on:{editContent:t.getContent}}):t._e(),n("ContentEdit",{attrs:{content:t.content},on:{save:t.save}})],1),t.isShowAddDialog?n("AddDialog",{on:{addToGithub:t.add,close:t.showAddDialog}}):t._e()],1)},d=[],f=(n("99af"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"Head"},[n("div",{staticClass:"chooseBtn",attrs:{title:"文章列表"},on:{click:t.showPath}}),n("div",{staticClass:"addBtn",attrs:{title:"添加章节"},on:{click:t.showAddDialog}}),n("div",{staticClass:"deleteBtn",attrs:{title:"删除章节"},on:{click:t.toDelete}}),t.showChoosePath?n("PathList",{attrs:{path:t.path},on:{close:t.showPath,submit:t.choosePath}}):t._e()],1)}),g=[],p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"PathList"},[n("div",{staticClass:"cover",on:{click:t.close}}),n("div",{staticClass:"content"},[n("div",{staticClass:"content__item"},[n("div",{staticClass:"addList"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.list__input__value,expression:"list__input__value"}],staticClass:"list__input",attrs:{type:"text"},domProps:{value:t.list__input__value},on:{input:function(e){e.target.composing||(t.list__input__value=e.target.value)}}}),n("button",{on:{click:t.addPathlist}},[t._v("添加")])]),t._l(t.list,(function(e,o){return n("div",{key:o,class:o==t.currentIndex?"check":"uncheck",on:{click:function(n){return t.choose(e,o)}}},[t._v(" "+t._s(e.name)+" ")])}))],2),n("div",{staticClass:"submit",on:{click:t.submit}},[t._v("确定")]),n("div",{staticClass:"submit",on:{click:t.close}},[t._v("取消")])])])},v=[],m=(n("c975"),n("d3b7"),n("ac1f"),n("5319"),n("1276"),{Base64:{_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(t){var e,n,o,i,c,a,s,r="",u=0;t=m.Base64._utf8_encode(t);while(u<t.length)e=t.charCodeAt(u++),n=t.charCodeAt(u++),o=t.charCodeAt(u++),i=e>>2,c=(3&e)<<4|n>>4,a=(15&n)<<2|o>>6,s=63&o,isNaN(n)?a=s=64:isNaN(o)&&(s=64),r=r+this._keyStr.charAt(i)+this._keyStr.charAt(c)+this._keyStr.charAt(a)+this._keyStr.charAt(s);return r},decode:function(t){var e,n,o,i,c,a,s,r="",u=0;t=t.replace(/[^A-Za-z0-9+/=]/g,"");while(u<t.length)i=this._keyStr.indexOf(t.charAt(u++)),c=this._keyStr.indexOf(t.charAt(u++)),a=this._keyStr.indexOf(t.charAt(u++)),s=this._keyStr.indexOf(t.charAt(u++)),e=i<<2|c>>4,n=(15&c)<<4|a>>2,o=(3&a)<<6|s,r+=String.fromCharCode(e),64!==a&&(r+=String.fromCharCode(n)),64!==s&&(r+=String.fromCharCode(o));return r=m.Base64._utf8_decode(r),r},_utf8_encode:function(t){t=t.replace(/rn/g,"n");for(var e="",n=0;n<t.length;n++){var o=t.charCodeAt(n);o<128?e+=String.fromCharCode(o):o>127&&o<2048?(e+=String.fromCharCode(o>>6|192),e+=String.fromCharCode(63&o|128)):(e+=String.fromCharCode(o>>12|224),e+=String.fromCharCode(o>>6&63|128),e+=String.fromCharCode(63&o|128))}return e},_utf8_decode:function(t){var e="",n=0,o=0,i=0,c=0;while(n<t.length)o=t.charCodeAt(n),o<128?(e+=String.fromCharCode(o),n++):o>191&&o<224?(c=t.charCodeAt(n+1),e+=String.fromCharCode((31&o)<<6|63&c),n+=2):(c=t.charCodeAt(n+1),i=t.charCodeAt(n+2),e+=String.fromCharCode((15&o)<<12|(63&c)<<6|63&i),n+=3);return e}},getQueryVariable:function(t,e){for(var n=t||window.location.href,o=n.split("&"),i=0;i<o.length;i++){var c=o[i].split("=");if(c[0]==e)return c[1]}return!1}}),_=m,b=n("bc3a"),C=n.n(b),w=C.a.create({timeout:1e4});w.interceptors.request.use((function(t){return t}),(function(t){return Promise.reject(t)})),w.interceptors.response.use((function(t){return t.data}),(function(t){return Promise.reject(t)}));var S=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return t=t.toLowerCase(),"post"===t?w.post(e,n):"get"===t?w.get(e,{params:n}):"put"===t?w.put(e,n):"delete"===t?w.delete(e):(console.log("未知的method"),Promise.reject("未知的method"))},k={addToGitHub:function(t,e,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i="https://api.github.com/repos/".concat(t,"/").concat(n.substring(0,n.indexOf("/")),"/contents/").concat(n.substring(n.indexOf("/")+1),"?access_token=").concat(e),c={};return new Promise((function(t,e){c.message="create".concat(o["title"]),c.content=_.Base64.encode(JSON.stringify(o));var n="";null==c&&void 0==c||(n=JSON.stringify(c),S("put",i,n).then((function(e){t(e)}),(function(t){e(t)})))}))},getFromGitHub:function(t,e,n){return new Promise((function(o,i){var c="https://api.github.com/repos/".concat(t,"/").concat(n.substring(0,n.indexOf("/")),"/contents/").concat(n.substring(n.indexOf("/")+1),"?access_token=").concat(e);S("get",c).then((function(t){var e=_.Base64.decode(t.content);o(e)}),(function(t){i(t)}))}))},getListFromGitHub:function(t,e,n){return new Promise((function(o,i){var c="https://api.github.com/repos/".concat(t,"/").concat(n.substring(0,n.indexOf("/")),"/contents/").concat(n.substring(n.indexOf("/")+1),"?access_token=").concat(e);S("get",c).then((function(t){var e=t;o(e)}),(function(t){i(t)}))}))},getShaFromGitHub:function(t,e,n){return new Promise((function(o,i){var c="https://api.github.com/repos/".concat(t,"/").concat(n.substring(0,n.indexOf("/")),"/contents/").concat(n.substring(n.indexOf("/")+1),"?access_token=").concat(e);S("get",c).then((function(i){if(console.log(i),"Not Found"==i.message)k.addToGitHub(t,e,n);else{var c=i.sha;o(c)}}),(function(t){i(t)}))}))},UpdateToGitHub:function(t,e,n,o){var i="https://api.github.com/repos/".concat(t,"/").concat(n.substring(0,n.indexOf("/")),"/contents/").concat(n.substring(n.indexOf("/")+1),"?access_token=").concat(e),c={};return new Promise((function(a,s){k.getShaFromGitHub(t,e,n).then((function(t){c.sha=t,c.message="upload note",c.content=_.Base64.encode(JSON.stringify(o)),S("put",i,JSON.stringify(c)).then((function(t){a(t)}),(function(t){console.log(t),s(t)}))}),(function(t){s(t)}))}))},DeleteFromGitHub:function(t,e,n){return new Promise((function(o,i){var c="https://api.github.com/repos/".concat(t,"/").concat(n.substring(0,n.indexOf("/")),"/contents/").concat(n.substring(n.indexOf("/")+1),"?access_token=").concat(e),a={};k.getShaFromGitHub(t,e,n).then((function(t){a.sha=t,a.message="delete note",c+="&message=".concat(a.message,"&sha=").concat(a.sha),S("delete",c).then((function(t){o(t)}),(function(t){console.log(t),i(t)}))}),(function(t){i(t)}))}))}},x=k,P={props:["path","list","currentPath","currentIndex","list__input__value"],created:function(){this.getlist()},methods:{addPathlist:function(){console.log(this.list__input__value)},getlist:function(){var t=this,e=localStorage.getItem("account")||"",n=localStorage.getItem("token")||"";x.getListFromGitHub(e,n,"".concat(this.path)).then((function(e){e.length&&(t.list=e,t.currentPath=t.list[0].path)}))},choose:function(t,e){this.currentPath=t.path,this.currentIndex=e},submit:function(){console.log(this.currentPath),this.$emit("submit",this.currentPath)},close:function(){this.$emit("close")}}},y=P,O=(n("9936"),Object(a["a"])(y,p,v,!1,null,null,null)),D=O.exports,A={props:["path","showChoosePath"],data:function(){return{}},components:{PathList:D},methods:{showPath:function(){this.showChoosePath=!this.showChoosePath},choosePath:function(t){this.$emit("choosePath",t)},showAddDialog:function(){this.$emit("showAddDialog")},toDelete:function(){this.$emit("toDelete")}}},I=A,$=(n("bccf"),Object(a["a"])(I,f,g,!1,null,null,null)),j=$.exports,H=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ContentList"},t._l(t.list,(function(e,o){return n("div",{key:o,class:o==t.currentIndex?"check":"uncheck",on:{click:function(n){return t.editContent(e,o)}}},[t._v(" "+t._s(e.name)+" ")])})),0)},G=[],L={props:["list"],data:function(){return{currentPath:"",currentIndex:0}},created:function(){this.editContent(this.list[0],0)},methods:{editContent:function(t,e){this.currentPath=t.path,this.currentIndex=e,this.$emit("editContent",t)}}},N=L,T=(n("2c32"),Object(a["a"])(N,H,G,!1,null,null,null)),B=T.exports,E=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"Dialog"},[n("div",{staticClass:"cover",on:{click:t.close}}),n("div",{staticClass:"content"},[n("div",{staticClass:"content__item"},[n("span",[t._v("title:")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],attrs:{type:"text"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})]),n("div",{staticClass:"submit",on:{click:t.submit}},[t._v("确定")]),n("div",{staticClass:"submit",on:{click:t.close}},[t._v("取消")])])])},F=[],J={data:function(){return{title:""}},methods:{submit:function(){this.$emit("addToGithub",this.title),this.$emit("close",this.title)},close:function(){this.$emit("close",this.title)}}},M=J,Q=(n("be38"),Object(a["a"])(M,E,F,!1,null,null,null)),V=Q.exports,z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ContentEdit"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.nowContent,expression:"nowContent"}],staticClass:"textarea",attrs:{name:"",id:""},domProps:{value:t.nowContent},on:{input:function(e){e.target.composing||(t.nowContent=e.target.value)}}}),n("div",{staticClass:"areaBar"},[n("div",{staticClass:"bar__areacount"},[t._v("字数："+t._s(t.nowContent.length))])]),n("div",{staticClass:"save",on:{click:t.toSave}},[t._v("save")])])},U=[],q={data:function(){return{nowContent:"",content:""}},watch:{getContent:function(t,e){t==e&&(this.nowContent=JSON.parse(t).content)}},methods:{toSave:function(){this.$emit("save",this.nowContent)}}},Z=q,K=(n("7828"),Object(a["a"])(Z,z,U,!1,null,null,null)),R=K.exports,W={data:function(){return{token:"",account:"zaneblbl",path:"story/",list:[],isShowAddDialog:!1,maxId:0,content:"",loading:!1,currentTitle:"",currentId:"",currentPath:""}},components:{ContentList:B,AddDialog:V,ContentEdit:R,Head:j},created:function(){this.token=localStorage.getItem("token")||"",this.account=localStorage.getItem("account")||"",this.getlist()},methods:{choosePath:function(t){this.path=t,console.log(this.path),this.list=[],this.getlist()},getlist:function(){var t=this;x.getListFromGitHub(this.account,this.token,"".concat(this.path)).then((function(e){console.log(e),t.list=e,t.maxId=e.length}))},add:function(t){var e=this;this.loading=!0;var n={};n.id=this.maxId+1,n.title=t,n.content="",x.addToGitHub(this.account,this.token,"".concat(this.path,"/").concat(t,"-").concat(n.id,".json"),n).then((function(){e.$message({message:"添加成功",type:"success"}),e.getlist(),e.loading=!1}),(function(){e.loading=!1,e.$message.error("添加失败")}))},toDelete:function(){var t=this;this.loading=!0,x.DeleteFromGitHub(this.account,this.token,"".concat(this.currentPath)).then((function(){t.$message({message:"删除成功",type:"success"}),t.getlist(),t.loading=!1}),(function(){t.loading=!1,t.$message.error("删除失败")}))},getContent:function(t){var e=this;this.loading=!0,console.log(t),x.getFromGitHub(this.account,this.token,"".concat(this.path).concat(t.path)).then((function(n){console.log(n),e.content=n;var o=JSON.parse(n);e.currentTitle=o.title,e.currentId=o.id,e.currentPath="".concat(e.path).concat(t.path),e.loading=!1}))},save:function(t){var e=this;this.loading=!0;var n={};n.id=this.currentId,n.title=this.currentTitle,n.content=t,x.UpdateToGitHub(this.account,this.token,"".concat(this.path,"/").concat(n.title,"-").concat(n.id,".json"),n).then((function(){e.loading=!1,e.$message({message:"保存成功",type:"success"})}),(function(){e.loading=!1,e.$message.error("保存失败")}))},showAddDialog:function(){this.isShowAddDialog=!this.isShowAddDialog}}},X=W,Y=(n("5872"),Object(a["a"])(X,h,d,!1,null,null,null)),tt=Y.exports,et=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"Login"},[n("div",{staticClass:"contentBox"},[n("div",{staticClass:"item"},[n("span",[t._v("clientID: ")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.clientID,expression:"clientID"}],staticClass:"item__input",attrs:{type:"text"},domProps:{value:t.clientID},on:{input:function(e){e.target.composing||(t.clientID=e.target.value)}}})]),n("div",{staticClass:"item"},[n("span",[t._v("clientSecret: ")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.clientSecret,expression:"clientSecret"}],staticClass:"item__input",attrs:{type:"text"},domProps:{value:t.clientSecret},on:{input:function(e){e.target.composing||(t.clientSecret=e.target.value)}}})]),n("div",{staticClass:"login",on:{click:t.init}},[t._v("登录")])])])},nt=[],ot={data:function(){return{clientID:"3d3b51cea6b8867e0f2c",clientSecret:"9a9c5abf88dee6622b7175bdfae6567f002f9ef3",access_token:"",loading:!1,loginText:""}},created:function(){var t=_.getQueryVariable(window.location.href,"code");t&&this.init()},methods:{init:function(){var t=this;console.log(this.access_token),this.access_token=localStorage.getItem("access_token")||"",this.access_token?t.$router.push({path:"/MainPage"}):t.loginListener(t.clientID,t.clientSecret)},toLogin:function(t){console.log(t),S("get","https://github.com/login/oauth/access_token?client_id=".concat(t.clientID,"&client_secret=").concat(t.clientSecret,"&code=").concat(t.code)).then((function(t){console.log(t);var e=_.getQueryVariable(t,"access_token")||"";localStorage.setItem("access_token",e)}))},loginListener:function(t,e){var n="https://github.com/login/oauth/authorize?client_id=".concat(t),o=_.getQueryVariable(window.location.href,"code");if(o){var i={clientID:t,clientSecret:e,code:o};this.toLogin(i)}else window.location.href=n}}},it=ot,ct=(n("50ba"),Object(a["a"])(it,et,nt,!1,null,null,null)),at=ct.exports;o["a"].use(l["a"]);var st=new l["a"]({routes:[{path:"/",name:"Login",component:at},{path:"/MainPage",name:"MainPage",component:tt},{path:"/*",redirect:"/"}]}),rt=n("2f62");o["a"].use(rt["a"]);var ut=new rt["a"].Store({state:{},mutations:{},actions:{},modules:{}});o["a"].config.productionTip=!1,new o["a"]({router:st,store:ut,render:function(t){return t(u)}}).$mount("#app")},5872:function(t,e,n){"use strict";var o=n("8abe"),i=n.n(o);i.a},"5c0b":function(t,e,n){"use strict";var o=n("9c0c"),i=n.n(o);i.a},7828:function(t,e,n){"use strict";var o=n("c9ec"),i=n.n(o);i.a},"8abe":function(t,e,n){},9936:function(t,e,n){"use strict";var o=n("1b55"),i=n.n(o);i.a},"9c0c":function(t,e,n){},bccf:function(t,e,n){"use strict";var o=n("363f"),i=n.n(o);i.a},be38:function(t,e,n){"use strict";var o=n("da5f"),i=n.n(o);i.a},c9ec:function(t,e,n){},da0b:function(t,e,n){},da5f:function(t,e,n){},eb90:function(t,e,n){}});